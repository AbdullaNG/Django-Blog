{% extends 'main/base.html' %}

{% block title %}
	<title>Homepage</title>
{% endblock title %}



{% block content %}
<div class="row">
	<div class="col-md-4">
		<div class="container border border-3 rounded p-3 mb-4 bg-white">
			<h2>Django Blog</h2>
			<p class="text-muted">You can put anything you want here!</p>
		
			<ul class="list-group">
				<li class="list-group-item">Articles</li>
				<li class="list-group-item">Latest Posts</li>
				<li class="list-group-item">Announcements</li>
				<li class="list-group-item">etc</li>
			</ul>
		</div>
	</div>
	
	<div class="col-md-8">
	{% for post in posts %}
		<article class="d-flex align-items-start mb-4 border border-3 p-3 rounded bg-white">
			<img src="{{ post.author.profile.image.url }}" class="rounded-circle me-3" style="width: 64px; height: 64px;">
			<div class="flex-grow-1">
				<div class="d-flex justify-content-between">
					<a href="{% url 'user-posts' post.author.username %}" class="text-decoration-none">{{ post.author }}</a>
					<small>{{ post.date_posted}}</small>
				</div>
				<hr>
				<h2 class="mt-2">
					<a href="{% url 'post-detail' post.id %}" class="text-decoration-none text-dark">{{ post.title }}</a>
				</h2>
				<p>{{ post.content }}</p>
			</div>
		</article>
	{% endfor %}

	{% if is_paginated %}
		{% if page_obj.has_previous %}
			<a class="btn btn-outline-info mb-4" href="?page=1">First</a>
			<a class="btn btn-outline-info mb-4" href="?page={{ page_obj.previous_page_number }}">Previous</a>
		{% endif %}
	
		{% for num in page_obj.paginator.page_range %}
			{% if page_obj.number == num %}
				<a class="btn btn-info mb-4" href="?page={{ num }}">{{ num }}</a>
				{% elif num > page_obj.number|add:'-3' and num < page_obj.number|add:'3' %}
				<a class="btn btn-outline-info mb-4" href="?page={{ num }}">{{ num }}</a>
			{% endif %}
		{% endfor %}
	
		{% if page_obj.has_next %}
			<a class="btn btn-outline-info mb-4" href="?page={{ page_obj.next_page_number }}">Next</a>
			<a class="btn btn-outline-info mb-4" href="?page={{ page_obj.paginator.num_pages }}">Last</a>
		{% endif %}
	{% endif %}
	</div>
</div>

{% endblock content %}